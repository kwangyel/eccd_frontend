<div>
    <div class="flex justify-content-between my-4">
        <p class="text-xl">Select Building to View Tax Report</p>
    </div>

    <div class="flex align-items-center mb-2 justify-content-between">
        <div>
            <p>
                Showing {{ paginatedPlotData.data.length }} of
                {{ paginatedPlotData.count }} Entries
            </p>
        </div>
        <div class="">
            <p-paginator (onPageChange)="onPageChange($event)" [first]="firstPageNumber" [rows]="rows"
                [totalRecords]="paginatedPlotData.count" [rowsPerPageOptions]="rowsPerPageOptions"
                [showFirstLastIcon]="true" #paginator></p-paginator>
        </div>
    </div>

    <p-table [value]="paginatedPlotData.data" styleClass="p-datatable-striped" #dt [globalFilterFields]="['plotId']">
        <ng-template pTemplate="caption">
            <div class="flex flex-column align-items-end justify-content-end">
                <p class="text-sm font-normal">Filter by Plot ID</p>
                <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                    placeholder="Search keyword" />
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Plot Id</th>
                <th>Plot Category</th>
                <th>Net Area</th>
                <th>Lap Name</th>
                <th>Precinct Name</th>
                <th>Thram</th>
                <th>Buildings</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-plot>
            <tr>
                <td> {{ plot.plotId }} </td>
                <td>{{ plot.plotCategory }}</td>
                <td>{{ plot.netArea }} {{ plot.areaUnit }}</td>
                <td>{{ plot.lapName }}/ {{ plot.lapCode }}</td>
                <td>{{ plot.precinctName }} /{{ plot.precinctCode }}</td>

                <td>
                    <p>
                        {{ plot.thram?.thramNo }}
                    </p>
                </td>

                <td>
                    <div>
                        <p *ngIf="!plot.buildings.length">No Buildings Added</p>
                        <p *ngFor="let building of plot.buildings" class="cursor-pointer font-semibold hover:underline text-blue-600"
                            (click)="navigateToBuilding(building.id)">
                            # {{ building.name }}
                        </p>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <p *ngIf="!paginatedPlotData.count" class="mt-4">- No Plots</p>
</div>