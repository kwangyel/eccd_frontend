<div class="grid p-0 m-0">
    <div class="col-1 hidden md:block"></div>
    <div class="col-12 md:col-10 flex justify-content-between align-items-center py-3">
        <div class="flex align-items-center gap-2 font-semibold">
            <img src="assets/logo/zhidhay.svg" class="w-4rem" alt="Zhidhay Logo" />
            <div class="flex flex-column justify-content-between">
                <p class="text-3xl font-bold m-0">ZHIDHAY</p>
                <p class="text-sm m-0">Early Childhood Care & Development</p>
            </div>
        </div>
    </div>
    <div class="col-1 hidden md:block"></div>
</div>

<!-- Main Content -->
<div class="grid">
    <div class="col-1 hidden lg:block"></div>
    <div class="col-12 lg:col-10">

        <!-- Page Title -->
        <div class="text-center mb-5">
            <h1 class="text-4xl font-bold text-900 mb-2">Enrollment Payment</h1>
            <p class="text-lg text-600">Please pay the enrollment fee to complete the enrollment process</p>
        </div>

        <!-- Application Form -->
        <div *ngIf="currentPaymentState == 'INITIAL'" class="col-6 mx-auto">
            <!-- Form Container -->
            <p-card class="">
                <form (ngSubmit)="makeARRequest()">
                    <!-- Step 1: Child Information -->
                    <div class="fade-in">
                        <h2 class="text-2xl font-semibold text-900 mb-4 border-bottom-2 border-primary pb-2">
                            <i class="pi pi-credit-card text-primary mr-2"></i>Payment Information
                        </h2>
                        <div class="grid">
                            <div class="col-6">
                                <label for="amount" class="block text-900 font-medium mb-2">
                                    Amount <span class="text-red-500">*</span> : Nu. {{ amount }}
                                </label>
                            </div>


                            <div class="col-12">
                                <label for="medicalConditions" class="block text-900 font-medium mb-2">
                                    Select Bank
                                </label>
                                <p-dropdown [options]="banks" placeholder="Select bank" optionLabel="name"
                                    optionValue="code"></p-dropdown>
                            </div>

                            <div class="col-12">
                                <label for="allergies" class="block text-900 font-medium mb-2">
                                    Enter Account Number
                                </label>
                                <input pInputText id="accountNumber" placeholder="Enter account number" />
                            </div>

                            <div class="col-12">
                                <p-button label="Submit Payment" icon="pi pi-check" [loading]="isSubmitting"
                                    type="submit">
                                </p-button>
                            </div>
                        </div>
                    </div>

                </form>
            </p-card>
        </div>

        <div *ngIf="currentPaymentState == 'AE_APPROVED'" class="col-6 mx-auto">
            <!-- Form Container -->
            <p-card class="shadow-2">
                <form (ngSubmit)="makeARRequest()">
                    <!-- Step 1: Child Information -->
                    <div class="fade-in">
                        <h2 class="text-2xl font-semibold text-900 mb-4 border-bottom-2 border-primary pb-2">
                            <i class="pi pi-credit-card text-primary mr-2"></i>Please enter the OTP received on your
                            phone
                        </h2>
                        <div class="grid">
                            <div class="col-12 md:col-6">
                                <label for="amount" class="block text-900 font-medium mb-2">
                                    Amount <span class="text-red-500">*</span> : Nu. {{ amount }}
                                </label>
                            </div>

                            <div class="col-12">
                                <label for="otp" class="block text-900 font-medium mb-2">
                                    Enter the OTP
                                </label>
                                <input pInputText id="otp" placeholder="Type the 6 digit OTP" type="number" />
                            </div>

                            <div class="col-12">
                                <p-button label="Submit OTP" icon="pi pi-check" [loading]="isSubmitting"
                                    type="submit">
                                </p-button>
                            </div>
                        </div>
                    </div>

                </form>
            </p-card>

        </div>

        <!-- payment successful -->
        <div *ngIf="currentPaymentState == 'DR_APPROVED'" class="col-6 mx-auto">

            <p-card class="shadow-4 border-round-xl bg-blue-50">
                <div class="fade-in p-5 flex flex-column align-items-center">
                    <div class="flex align-items-center justify-content-center bg-green-100 border-circle" style="width:70px; height:70px;">
                        <i class="pi pi-check-circle text-green-600" style="font-size:2.5rem;"></i>
                    </div>
                    <h2 class="text-2xl md:text-3xl font-bold text-green-800 my-4 text-center tracking-wide">
                        Payment Successful!
                    </h2>
                    <div class="w-full max-w-md bg-white border-1 border-blue-100 border-round-lg px-5 py-4 mb-4 shadow-1">
                        <div class="flex flex-column gap-2">
                            <div class="flex justify-content-between text-lg">
                                <span class="font-medium text-blue-800">Amount Paid:</span>
                                <span class="font-bold text-green-700">Nu. {{ amount }}</span>
                            </div>
                            <div class="flex justify-content-between text-lg">
                                <span class="font-medium text-blue-800">Payment Date:</span>
                                <span class="text-blue-700">{{ paymentDate | date:'dd/MM/yyyy' }}</span>
                            </div>
                            <div class="flex justify-content-between text-lg">
                                <span class="font-medium text-blue-800">Receipt ID:</span>
                                <span class="text-gray-700">{{ receiptId }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="mb-4 w-full max-w-md text-center">
                        <p class="text-base text-700 mb-2">
                            <span class="pi pi-info-circle text-blue-500 mr-2"></span>
                            Thank you for your payment. <span class="font-medium text-green-700">Your transaction was successful.</span>
                        </p>
                        <p class="text-base text-700 mb-0">
                            A confirmation will be sent to you shortly.<br>
                            <span class="text-blue-700">Our admissions team will reach out within <b>2â€“3 business days</b> with next steps regarding your enrollment.</span>
                        </p>
                    </div>
                    <p-button
                        styleClass="mt-3 px-5 py-2 font-semibold text-lg border-round-lg"
                        label="Return to Application"
                        icon="pi pi-arrow-left"
                        severity="primary"
                        [routerLink]="['/']">
                    </p-button>
                </div>
            </p-card>

        </div>
    </div>
</div>